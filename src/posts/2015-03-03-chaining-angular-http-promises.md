---
title: Chaining Angular $http promises
layout: post
twitter_url: https://twitter.com/paulsalaets/status/572763282488094720
meta_description: The success() and error() methods on promises returned by the Angular $http service do not chain like then()
---

Angular adds `success()` and `error()` convenience methods to promises returned by `$http` but they don't work the same as `then()`.

### Versions used below

{% highlight javascript %}
{
  "angular": "1.3.14"
}
{% endhighlight %}

## Chaining off of then()

{% highlight js %}
$http(requestConfig)
  .then(fn1)
  .then(fn2)
{% endhighlight %}

Once `fn1` has signaled it is done, `fn2` will run. Nothing new here, this is just promises chaining like you'd expect.

One thing to note is the response object is passed to fulfill handlers *and* reject handlers. This does not follow the convention of passing an `Error` to reject handlers.

### success() after then()

This fails because the promise returned by `then()` is a plain old `$q` promise. It doesn't have the http-specific `success()` and `error()` helpers.

{% highlight js %}
$http(requestConfig)
  .then(fn1)
  .success(fn2) // TypeError: undefined is not a function
{% endhighlight %}

## Chaining off of success() and error()

Taking a [peek at the code](https://github.com/angular/angular.js/blob/v1.3.14/src/ng/http.js#L808), we see that `success()` and `error()` return the original http promise and not the promise generated by your callback. The callback's return value is ignored.

Chaining off of `success()` is possible but it does not work like chaining off of `then()`.

{% highlight js %}
$http(requestConfig)
  .success(fn1)
  .then(fn2)
{% endhighlight %}

`fn2` will not wait for `fn1` and they're essentially run in parallel.

## What do success() and error() provide?

The `success()` and `error()` methods pass properties of the response object to their callback.

{% highlight js %}
// using success() or error()
$http(requestConfig)
  .success(function(data, status, headers, config) {

  })

// using then()
$http(requestConfig)
  .then(function(response) {
    // response.data
    // response.status
    // response.headers
    // response.config
  })

{% endhighlight %}

You save a little typing and use slightly less generic names but I'm not sure it's worth the potential confusion.
